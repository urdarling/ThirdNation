

# Mission 3

### VIM学习笔记

#### vim基本用法

---

1. vim的官方文档：终端中输入vim后输入：help即可进入。：q关闭窗口，：qa！强行关闭vim。  

2. 快捷键:HJKL ___对应左下上右___

3. **:set mouse=a** 进入鼠标模式，输入___CTRL-T or CTRL-O___ 可以返回上一级。  

4. vim有四种常用模式

* Normal-mode
* Insert-mode
* Command-mode
* Visual-mode

| 模式     | 功能                                                         |
| :------- | :----------------------------------------------------------- |
| 正常模式 | 浏览文件，可以复制粘贴删除文件，此时按键就是功能键不会输入任何内容，启动vim后默认进入这个模式，且不论什么模式按下ESC后就会进入这个模式， |
| 插入模式 | 正常模式下按i进入插入模式，进入编辑状态                      |
| 命令模式 | 正常模式输入：或者/进入，该模式可以执行一些vim或者插件的指令，类似windows的命令行。 |
| 可视模式 | 正常模式下输入v或者Ctrl+v进入，类似鼠标操作的模式，选择和浏览的时候很方便 |

#### **vim的使用**

1. **用vim打开文件**

   在文件前面加上vim关键字，例如vim file.

   打开多个文件就用 vim file1 file2.......

   这种方式打开文件，默认显示第一个文件，如需切换需要在正常模式按下：这时会在底部出现冒号，然后在输入ls打开所有文件的序号和文件名，继续输入：，输入b+文件编号即可切换。

2. **显示多个文件** 

   vim可以分屏，用vim -O+数量 file1 file2 左右分屏，用vim -o+数量 file1 file2 上下分屏 

3. **分屏**

   Ctrl+w在按下s可以上下分割当前的文件

   按住：后输入sp，在输入文件名如：sp file 可以吧当前文件和新打开的文件分割

   Ctrl+w在按下v是左右分割

   按住：后输入sp，在输入文件名如：vsp file 可以吧当前文件和新打开的文件分割

4. **分屏后切换光标和移动**

   切换左右光标Ctrl+w h ;Ctrl+w l光标定位左边 ; Ctrl+w H 分屏移动到左 ;Ctrl+w L 分屏移动到右。

   切换上下光标Ctrl+w j ;Ctrl+w k光标定位左边 ; Ctrl+w J 分屏移动到左 ;Ctrl+w K 分屏移动到右。

   Ctrl+w c关闭当前分屏，Ctrl+w q关闭当前，如果是最后则推出vim。

5. **vim退出**

   :w保存对文件修改，不退出;:w!强制保存不退出; :w file 保存当前文件修改到file文件 ：q退出不保存 

   ：qa！退出所有不保存 ：wq推出文件保存修改 ：x退出并保存修改 ：e file打开另一个文件 :e!放弃所有修改恢复到上次位置。：saveas file 另存为。打开多个文件时用:bn :bp切换文件。

6. **vim输入模式** 

   i 是在光标所在的字符之前插入需要录入的文本。


   I 是在光标所在行的行首插入需要录入的文本。


   a 是在光标所在的字符之后插入需要录入的文本。


   A 是在光标所在行的行尾插入需要录入的文本。


   o 是光标所在行的下一行行首插入需要录入的文本。


   O 是光标所在行的上一行行首插入需要录入的文本。


   s 删除光标所在处的字符然后插入需要录入的文本。

   S 删除光标所在行，在当前行的行首开始插入需要录入的文本。

7. **vim命令模式**

   :set nu

   该命令会显示行号。

   :set nonu

   该命令会取消行号。

   :n

   定位到 n 行。

8. **VIM 进行关键字的查找。**

   /{目标字符串}

   如：/zempty 会在文本中匹配 zempty 的地方高亮。

   查找文本中匹配的目标字符串，查到以后，输入键盘上的 n 会去寻找下一个匹配，N 会去寻找上一个匹配。

   :set ic

   编辑器将不会区分大小写，如果你进行该设置之后，进行关键字查询如 /zempty 如果文本中有 Zempty ,zEmpty,....,只要是字符相同不会区分大小写都会进行匹配。

   :set noic

   区分大小写的查询。

   **VIM 删除多行文本**


   :n1,n2d

   n1 和 n2 指的是起始行号和结束行号，d 是删除关键字

   **VIM 处理文本的替换**


   :{作用范围}s/{目标}/{替换}/{替换的标志}


   作用范围分为当前行、全文、选区等等。


   :s/zempty/handsome/g

   将会把当前光标所在行的 zempty 替换成 handsome


   :%s/zempty/handsome/g

   将会把全文中的 zempty 替换成 handsome


   :n1,n2s/zempty/handsome/g

   这里的 n1 和 n2 值得是行号，将会替换掉 n1 到 n2 的所有 zempty 为 handsome.


   选区，在可视模式下选择区域后输入 : ，VIM 会自动补全为 :'<,'>。

   :'<,'>s/zempty/handsome/g

   这个操作咋一看起来有点懵逼，这个操作是可视模式 (Visual-mode) 下选区中的替换操作（可视模式下文会谈到），可视模式下输入：会自动补全 :'<,'> 这个是可视范围下的操作范围，类似于 % 和 n1,n2，代表操作的文本范围，上面的例子就是替换掉可视区域的 zempty 为 handsome。


   下面来谈谈替换的标志。

   上文中命令结尾的 g 即是替换标志之一，表示全局 global 替换（即替换目标的所有出现）。 还有很多其他有用的替换标志：


   空替换标志表示只替换从光标位置开始，目标的第一次出现

   :s/zempty/handsome

   作用于当前行，从光标处开始查找替换，仅仅替换第一次匹配 zempty 的地方为handsome 。


   :%s/zempty/handsome

   替换掉文件中所有行第一次出现 zempty 的地方为 handsome 。


   i 表示大小写不敏感查找，I 表示大小写敏感：

   :%s/zempty/handsome/i

   替换掉所有行第一个出现 zempty (不区分大小写) 为 handsome 。


   :%s/zempty/handsome/gi

   替换掉所有行出现 zempty (不区分大小写) 为 handsome 。


   c 表示需要确认，例如全局查找"zempty"替换为"handsome"并且需要确认：

   :%s/zempty/handsome/gc

9. **VIM 执行 Linux 命令**


   :!command

   : 后面紧跟着 ! ，! 后面紧跟着 linux 命令（ command 指操作 Linux 系统的一系列命令，如创建文件，新建文件夹，查询文件的属性的等），例子如下，

   :!date

   执行 date 命令显示时间，执行完命令以后按下键盘上的 Enter 就会返回到文件。